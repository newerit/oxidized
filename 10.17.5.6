#        routerboard: yes
#              model: CRS317-1G-16S+
#      serial-number: 955C0A6CCA4B
#      firmware-type: dx3230L
#   factory-firmware: 6.42.12
#   current-firmware: 6.45.8
#   upgrade-firmware: 6.47.8
# 
#             channel: long-term
#   installed-version: 6.47.8
# 
# Flags: U - undoable, R - redoable, F - floating-undo 
#   ACTION                                   BY               POLICY             
# 
# software id = 4I4J-G015
#
# model = CRS317-1G-16S+
# serial number = 955C0A6CCA4B
/interface bridge
add name=trunk-vlans priority=0x7999 vlan-filtering=yes
/interface ethernet
set [ find default-name=ether1 ] l2mtu=1592 speed=100Mbps
set [ find default-name=sfp-sfpplus1 ] advertise="10M-half,10M-full,100M-half,100M-full,1000M-half,1000M-full,2500M-full,5000M-full,10000M-full" comment="sfp10-1 ( ENTRADA DE LINK FARIAS-NET )" l2mtu=1592
set [ find default-name=sfp-sfpplus2 ] auto-negotiation=no comment=sfp11-2 l2mtu=1592
set [ find default-name=sfp-sfpplus3 ] l2mtu=1592 speed=10Gbps
set [ find default-name=sfp-sfpplus4 ] l2mtu=1592 speed=10Gbps
set [ find default-name=sfp-sfpplus5 ] advertise=1000M-full,10000M-full comment="SAIDA DE LINK FARIAS-NET P/ VALDECI & JOELSON" l2mtu=1592 loop-protect=on speed=10Gbps
set [ find default-name=sfp-sfpplus6 ] l2mtu=1592 speed=10Gbps
set [ find default-name=sfp-sfpplus7 ] advertise=10M-half,10M-full,100M-half,100M-full,1000M-half,1000M-full,10000M-full auto-negotiation=no comment="SAIDA DE LINK FARIAS-NET P/ SANDRO & LUCIANO" l2mtu=1592 loop-protect=on speed=10Gbps
set [ find default-name=sfp-sfpplus8 ] l2mtu=1592 speed=10Gbps
set [ find default-name=sfp-sfpplus9 ] l2mtu=1592 speed=10Gbps
set [ find default-name=sfp-sfpplus10 ] l2mtu=1592 speed=10Gbps
set [ find default-name=sfp-sfpplus11 ] l2mtu=1592 speed=10Gbps
set [ find default-name=sfp-sfpplus12 ] l2mtu=1592 speed=10Gbps
set [ find default-name=sfp-sfpplus13 ] l2mtu=1592 speed=10Gbps
set [ find default-name=sfp-sfpplus14 ] advertise=10000M-full comment="SAIDA DE LINK FARIAS-NET P/ MARQUINHO" l2mtu=1592 loop-protect=on speed=10Gbps
set [ find default-name=sfp-sfpplus15 ] l2mtu=1592 speed=10Gbps
set [ find default-name=sfp-sfpplus16 ] l2mtu=1592 speed=10Gbps
/interface bonding
add mode=802.3ad name=LACP-LINK-INN slaves=sfp-sfpplus1,sfp-sfpplus2 transmit-hash-policy=layer-3-and-4
/interface ethernet switch port
set 0 limit-unknown-multicasts=yes limit-unknown-unicasts=yes storm-rate=1
set 1 limit-unknown-multicasts=yes limit-unknown-unicasts=yes storm-rate=1
set 2 limit-unknown-multicasts=yes limit-unknown-unicasts=yes storm-rate=1
set 3 limit-unknown-multicasts=yes limit-unknown-unicasts=yes storm-rate=1
set 4 limit-unknown-multicasts=yes limit-unknown-unicasts=yes storm-rate=1
set 5 limit-unknown-multicasts=yes limit-unknown-unicasts=yes storm-rate=1
set 6 limit-unknown-multicasts=yes limit-unknown-unicasts=yes storm-rate=1
set 7 limit-unknown-multicasts=yes limit-unknown-unicasts=yes storm-rate=1
set 8 limit-unknown-multicasts=yes limit-unknown-unicasts=yes storm-rate=1
set 9 limit-unknown-multicasts=yes limit-unknown-unicasts=yes storm-rate=1
set 10 limit-unknown-multicasts=yes limit-unknown-unicasts=yes storm-rate=1
set 11 limit-unknown-multicasts=yes limit-unknown-unicasts=yes storm-rate=1
set 12 limit-unknown-multicasts=yes limit-unknown-unicasts=yes storm-rate=1
set 13 limit-unknown-multicasts=yes limit-unknown-unicasts=yes storm-rate=1
set 14 limit-unknown-multicasts=yes limit-unknown-unicasts=yes storm-rate=1
set 15 limit-unknown-multicasts=yes limit-unknown-unicasts=yes storm-rate=1
set 16 limit-unknown-multicasts=yes limit-unknown-unicasts=yes storm-rate=1
set 17 limit-unknown-multicasts=yes limit-unknown-unicasts=yes storm-rate=1
/interface wireless security-profiles
set [ find default=yes ] supplicant-identity=MikroTik
/ip hotspot profile
set [ find default=yes ] html-directory=flash/hotspot
/snmp community
set [ find default=yes ] name=neweritmk
/system logging action
set 0 memory-lines=100
set 1 disk-lines-per-file=100
add bsd-syslog=yes name=newerit remote=177.66.65.102 target=remote
/user group
set full policy="local,telnet,ssh,ftp,reboot,read,write,policy,test,winbox,password,web,sniff,sensitive,api,romon,dude,tikapp"
/interface bridge port
add bridge=trunk-vlans interface=sfp-sfpplus3 pvid=101
add bridge=trunk-vlans interface=sfp-sfpplus4 pvid=101
add bridge=trunk-vlans comment="SAIDA DE LINK FARIAS-NET P/ VALDECI & JOELSON" edge=yes interface=sfp-sfpplus5 pvid=101
add bridge=trunk-vlans interface=sfp-sfpplus6 pvid=101
add bridge=trunk-vlans comment="SAIDA DE LINK FARIAS-NET P/ SANDRO & LUCIANO" edge=yes interface=sfp-sfpplus7 pvid=101
add bridge=trunk-vlans interface=sfp-sfpplus8 pvid=101
add bridge=trunk-vlans interface=sfp-sfpplus9 pvid=101
add bridge=trunk-vlans interface=sfp-sfpplus10 pvid=101
add bridge=trunk-vlans interface=sfp-sfpplus11 pvid=101
add bridge=trunk-vlans interface=sfp-sfpplus12 pvid=101
add bridge=trunk-vlans interface=sfp-sfpplus13 pvid=101
add bridge=trunk-vlans edge=yes interface=sfp-sfpplus14 pvid=101
add bridge=trunk-vlans interface=sfp-sfpplus15 pvid=101
add bridge=trunk-vlans interface=sfp-sfpplus16 pvid=101
add bridge=trunk-vlans interface=LACP-LINK-INN
/ip neighbor discovery-settings
set discover-interface-list=all
/interface bridge vlan
add bridge=trunk-vlans tagged=LACP-LINK-INN untagged="sfp-sfpplus3,sfp-sfpplus4,sfp-sfpplus5,sfp-sfpplus6,sfp-sfpplus7,sfp-sfpplus8,sfp-sfpplus10,sfp-sfpplus11,sfp-sfpplus12,sfp-sfpplus13,sfp-sfpplus14,sfp-sfpplus15,sfp-sfpplus16" vlan-ids=101
/ip address
add address=10.17.5.6/30 interface=trunk-vlans network=10.17.5.4
/ip dns
set servers=1.1.1.1
/ip route
add distance=1 gateway=10.17.5.5
/snmp
set contact=suporte@newerit.com enabled=yes location=SW-FARIASxPROEV trap-version=2
/system clock
set time-zone-name=America/Belem
/system identity
set name=SW_FARIAS-NET_X_PRO-EVOLUTION
/system logging
add action=newerit topics=account,info
/system note
set note="                            +-++-++-++-++-+ +-++-+\n                            |N||e||w||e||r| |I||T|\n                            +-++-++-++-++-+ +-++-+\n                            ++++|newerit.com|+++++\n                            +|contato@newerit.com|"
/system ntp client
set enabled=yes primary-ntp=200.160.0.8 secondary-ntp=200.189.40.8
/system package update
set channel=long-term
/system routerboard settings
set boot-os=router-os
/system scheduler
add interval=1d name=NEWERIT_BKPF on-event=NEWERIT_BKPF policy=ftp,reboot,read,write,policy,test,password,sniff,sensitive,romon start-date=apr/09/2019 start-time=04:31:33
add interval=2d name=NEWERIT_BKPFR on-event="/file remove [find]" policy=ftp,reboot,read,write,policy,test,password,sniff,sensitive,romon start-date=apr/09/2019 start-time=05:08:37
add interval=1d name="Clear Cache" on-event="Clear Cache" policy=ftp,reboot,read,write,policy,test,password,sniff,sensitive,romon start-date=oct/23/2020 start-time=06:05:00
add interval=1d name="Reboot Automatico" on-event="Reboot Automatico" policy=ftp,reboot,read,write,policy,test,password,sniff,sensitive,romon start-date=oct/23/2020 start-time=06:00:00
/system script
add dont-require-permissions=no name=NEWERIT_BKPF owner=flavio policy=ftp,reboot,read,write,policy,test,password,sniff,sensitive,romon source=":local saveSysBackup true\r\n:local encryptSysBackup false\r\n:local saveRawExport true\r\n\r\n:local FTPServer \"newerit.com\"\r\n:local FTPPort 21\r\n:local FTPUser \"nwftp@newerit.com\"\r\n:local FTPPass \"*********\"\r\n\r\n\r\n:local ts [/system clock get time]\r\n:set ts ([:pick \$ts 0 2].[:pick \$ts 3 5].[:pick \$ts 6 8])\r\n:local ds [/system clock get date]\r\n:set ds ([:pick \$ds 7 11].[:pick \$ds 0 3].[:pick \$ds 4 6])\r\n\r\n:local fname ([/system identity get name].\"-\".\$ds.\"-\".\$ts )\r\n:local sfname (\"/\".\$fname)\r\n:if (\$saveSysBackup) do={\r\n  :if (\$encryptSysBackup = true) do={ /system backup save name=(\$sfname.\".backup\") }\r\n  :if (\$encryptSysBackup = false) do={ /system backup save dont-encrypt=yes name=(\$sfname.\".backup\") }\r\n  :log info message=\"System Backup Finished\"\r\n}\r\nif (\$saveRawExport) do={\r\n  /export file=(\$sfname.\".rsc\")\r\n  :log info message=\"Raw configuration script export Finished\"\r\n}\r\n:local backupFileName \"\"\r\n:foreach backupFile in=[/file find] do={\r\n  :set backupFileName (\"/\".[/file get \$backupFile name])\r\n  :if ([:typeof [:find \$backupFileName \$sfname]] != \"nil\") do={\r\n    /tool fetch address=\$FTPServer port=\$FTPPort src-path=\$backupFileName user=\$FTPUser mode=ftp password=\$FTPPass dst-path=\$backupFileName upload=yes\r\n  }\r\n}\r\n:delay 5s\r\n\r\n:log info message=\"Arquivos temporarios de Backup removidos\"\r\n:log info message=\"Backup Enviado com Sucesso!\""
add dont-require-permissions=no name="Clear Cache" owner=138249675br policy=ftp,reboot,read,write,policy,test,password,sniff,sensitive,romon source="/ ip dns cache flush"
add dont-require-permissions=no name="Reboot Automatico" owner=138249675br policy=ftp,reboot,read,write,policy,test,password,sniff,sensitive,romon source="/ system reboot"
/tool e-mail
set address=177.66.65.102 from=suporte@newerit.com password=K0k@r321 port=587 start-tls=yes user=suporte@newerit.com
/tool romon
set enabled=yes secrets=pro917359
